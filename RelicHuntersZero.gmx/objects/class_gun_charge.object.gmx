<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>class_gun</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

charge = 0;
charging = false;
charge_time = 60;
automatic = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>408</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>-1</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>global.pause</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Relic Buffs

//Dev Potion
if (global.relic_dev_potion == 2)
{
    if ammo_current &lt; ammo
    {
        ammo_regen_time_current++;
        if ammo_regen_time_current &gt;= (ammo_regen_time*ammo_cost)
        {
            ammo_current += ammo_regen_amount;
            ammo_regen_time_current = 0;
        }
    }
    else ammo_regen_time_current = 0;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Animation and Rotation

if instance_exists(owner)
{
    var p = owner.myPlayerId;
    
    if (isActive)
    {
        if (!owner.sprinting)
        {
            image_angle = point_direction(x,y,global.crosshairX[p],global.crosshairY[p]);
        
            if owner.look_direction == 0 { image_xscale = -1; image_angle = image_angle+180; }
            if owner.look_direction == 1 image_xscale = 1; 
        }
        else
        {
            if (owner.move_direction &gt; 90 &amp;&amp; owner.move_direction &lt;= 270) { image_angle = 45; image_xscale = -1}
            else { image_angle = -45; image_xscale = 1; }
        }
            
        if ((owner.melee) || (owner.throw)) &amp;&amp; (owner.animation_current == 'melee')
        {
            if (owner.animation_index &gt;= 0) &amp;&amp; (owner.animation_index &lt; 1)
            {
                x = owner.x-(5*owner.look_direction);
                y = owner.y-15;
                image_angle = 0;
            }
            if (owner.animation_index &gt;= 1) &amp;&amp; (owner.animation_index &lt; 2)
            {
                x = owner.x-(5*owner.look_direction);
                y = owner.y-15;
                image_angle = 25;
            }
            if (owner.animation_index &gt;= 2) &amp;&amp; (owner.animation_index &lt; 5)
            {
                x = owner.x-(10*owner.look_direction);
                y = owner.y-10;
                image_angle = 25;
            }
            if (owner.animation_index &gt;= 5)
            {
                x = owner.x+(38*owner.look_direction);
                y = owner.y-7;
                image_angle = 160;
            }
            
            if (owner.look_direction == 0)
            { 
                image_xscale = -1;
                if (image_angle = 160)  x = owner.x-38;
                image_angle = -image_angle;
            }
            else image_xscale = 1;
        }   
        
        depth = (owner.depth)-1;
    }
    else
    {
        if (owner.look_direction == 0) { image_angle = 225; image_xscale = -1}
        else { image_angle = 135; image_xscale = 1; }
        depth = (owner.depth)+1;
    }
}


//Recoil

recoil_current += recoil_speed;

if (recoil_current &gt; 0) recoil_speed -= recoil_return;
else
{
    recoil_current = 0;
    recoil_speed = 0;
}

if (recoil_current &gt; recoil_max) recoil_current = recoil_max;



drawX = x +lengthdir_x( (-1*image_xscale*recoil_current), image_angle );
drawY = y +lengthdir_y( (-1*image_xscale*recoil_current), image_angle );
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Ammo
if (isActive)
{
    var input_reloading = false;

    if (instance_exists(owner))
    {
        if (owner.reloadKey) input_reloading = true;
    }

    if ( ((!ammo_current) &amp;&amp; !(global.relic_dev_potion == 2)) || (input_reloading) ) &amp;&amp; (!reloading) &amp;&amp; (ammo_current &lt; ammo) &amp;&amp; instance_exists(owner)
    {
        var p = owner.myPlayerId;
        
        var ammoTotal = 999;
        if (ammo_cost &gt; 0)
        {
            if (ammo_type == type_light) ammoTotal = floor(global.ammo_light[p]/ammo_cost);
            if (ammo_type == type_medium) ammoTotal = floor(global.ammo_medium[p]/ammo_cost);
            if (ammo_type == type_heavy) ammoTotal = floor(global.ammo_heavy[p]/ammo_cost);
            if (ammo_type == type_grenade) ammoTotal = floor(global.ammo_grenade[p]/ammo_cost);
        }
        
        if (ammoTotal)
        {
            ammo_diff = min(ammoTotal, (ammo - ammo_current));
            
            reloading = true;

            audio_play(owner.audio_emitter,false,1,sfx_reload_start);
            audio_play_exclusive(owner.audio_emitter,false,1,sfx_reload_loop1,sfx_reload_loop2,sfx_reload_loop3);
        }
    }
    
    if (reloading) &amp;&amp; instance_exists(owner)
    {
        var p = owner.myPlayerId;
        
        if (!owner.melee) reload_time_current++;
        
        if reload_time_current &gt;= reload_time
        {
            reload_time_current = 0;
            reloading = false;
            ammo_current += ammo_diff;
            
            if (ammo_type = type_light) global.ammo_light[p] -= ammo_diff*ammo_cost;
            if (ammo_type = type_medium) global.ammo_medium[p] -= ammo_diff*ammo_cost;
            if (ammo_type = type_heavy) global.ammo_heavy[p] -= ammo_diff*ammo_cost;
            if (ammo_type = type_grenade) global.ammo_grenade[p] -= ammo_diff*ammo_cost;
            
            if instance_exists(owner) audio_play(owner.audio_emitter,false,1,sfx_reload_end);
            if (audio_is_playing(sfx_reload_loop1)) audio_stop_sound(sfx_reload_loop1);
            if (audio_is_playing(sfx_reload_loop2)) audio_stop_sound(sfx_reload_loop2);
            if (audio_is_playing(sfx_reload_loop3)) audio_stop_sound(sfx_reload_loop3);
        }
    }
    
    if ammo_current &gt; ammo ammo_current = ammo;
}
else 
{
    reload_time_current = 0;
    reloading = false;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Aiming

if instance_exists(owner) &amp;&amp; (isActive)
{
    var p = owner.myPlayerId;
    if (owner.aiming)
    {
        aiming_direction = point_direction(x,y,global.crosshairX[p],global.crosshairY[p]);
          
        range_to_solid = range_finder(x,y,aiming_direction,projectile_range,class_solid,false,true);
        range_to_enemy = range_finder(x,y,aiming_direction,projectile_range,class_enemy,false,true);
        
        range_to_friendly = -1;
        if (global.playerCount &gt; 1)
        {
            for (var i=0; i&lt;instance_number(class_player); i++)
            {
                var testFriendly = instance_find(class_player,i);
                if (testFriendly) &amp;&amp; instance_exists(testFriendly)
                {
                    if (testFriendly.myPlayerId != owner.myPlayerId) range_to_friendly = range_finder(x,y,aiming_direction,projectile_range,testFriendly,false,true);
                }
            }
        }
        
        if (!range_to_solid) range_to_solid = 9999999;
        if (!range_to_enemy) range_to_enemy = 9999999;
        if (!range_to_friendly) range_to_friendly = 9999999;

        if (!goesThroughWalls) draw_range = min(range_to_solid,range_to_enemy,range_to_friendly,projectile_range);
        else draw_range = projectile_range;
        
        lineX = x+lengthdir_x(draw_range,aiming_direction);
        lineY = y+lengthdir_y(draw_range,aiming_direction);
        
        isPrecisionAiming = false;
        
        var enemyTargetTest = collision_line(x, y, x+lengthdir_x(projectile_range,aiming_direction), y+lengthdir_y(projectile_range,aiming_direction), class_enemy , false , true )
        if instance_exists(enemyTargetTest)
        {
			var bbox_center = get_bbox_center(enemyTargetTest);
            var distanceToTarget = point_distance(x,y, bbox_center[0], bbox_center[1]) - global.precisionDistance;
            var angleToTarget = point_direction(x+lengthdir_x(distanceToTarget,aiming_direction), y+lengthdir_y(distanceToTarget,aiming_direction), bbox_center[0], bbox_center[1]);
            
            //if ( abs( angle_difference(aiming_direction, angleToTarget) ) + (accuracy_aiming*owner.base_accuracy) &lt;= global.precisionAngle/2 )
            if ( abs( angle_difference(aiming_direction, angleToTarget) ) &lt;= (global.precisionAngle) )
            {
                isPrecisionAiming = true;
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Firing Control
if (isActive) &amp;&amp; (owner) &amp;&amp; instance_exists(owner)
{
    input_held = false;
    input_pressed = false;
    
    if (global.input[owner.myPlayerId] == K_INPUT_KEYBOARD)
    {
        if input_key_fire() input_held = true;
        if input_key_fire_pressed() input_pressed = true;
    }
    else
    {
        var joy = global.input[owner.myPlayerId];
        if (joy_rpos(joy) &gt; 0.7) 
        {
            input_held = true;
            if (!trigger_pressed)
            {
                trigger_pressed = true;
                input_pressed = true;
            }
        }
        
        if (joy_rpos(joy) &lt; 0.4) &amp;&amp; (trigger_pressed) trigger_pressed = false;
    }
    
    if ((input_held) || (input_pressed)) &amp;&amp; (owner.sprinting) //hackz0r!
    {
        if (!reloading) &amp;&amp; (can_fire) owner.sprinting = false;
    }
    
    shot_type = 0;
    
    if (input_held)
    {
        if (!reloading) &amp;&amp; (can_fire) &amp;&amp; (!owner.sprinting) &amp;&amp; (!owner.melee) &amp;&amp; (!charging){charge = charge_time; charging = true;}
    }
    
    if (input_pressed) &amp;&amp; (reloading)
    {
        audio_play(owner.audio_emitter,false,1,sfx_click);
        guiInfo = instance_create(owner.x,owner.y,gui_info);
        guiInfo.colorMain = K_BETU_RED;
        guiInfo.myString = loc_key("INFO_RELOADING");
        guiInfo.owner = id;
    }
    else if (input_pressed) &amp;&amp; (!ammo_current)
    {
        audio_play(owner.audio_emitter,false,1,sfx_click);
        guiInfo = instance_create(owner.x,owner.y,gui_info);
        guiInfo.owner = id;
        guiInfo.colorMain = K_BETU_RED;
        guiInfo.myString = loc_key("INFO_OUTOFAMMO");
    }
    
    //Rate of Fire
    if (!can_fire &amp;&amp; !charging)
    {
        fire_rate_current++;
        if fire_rate_current &gt;= fire_rate
        {
            fire_rate_current = 0;
            fire_burst_current = 0;
            can_fire = true;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Death
if (!instance_exists(owner)) instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>408</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>charging</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(owner) &amp;&amp; (isActive){
    if(!input_held){
        charging = false;
        charge = 0;
    }else{
        if(charge &lt; 0){
            if(fire_automatic){
                cmd_fire();
            }else{
                if(fire_burst_current &lt; fire_burst){
                    fire_burst_rate_current++
                    if(fire_burst_rate_current &gt;= fire_burst_rate){
                        fire_burst_rate_current = 0;
                        cmd_fire();
                    }
                }else{
                    charging = false;
                }
            }
            
        }
        charge --;  
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set Camera Distance When Zoomed
if (isActive) &amp;&amp; instance_exists(controller_camera)
{
    controller_camera.weaponRange = projectile_range;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
